<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í•œêµ­ì‚¬ ê²€ì •ì‹œí—˜</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .bg-custom {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="app" class="max-w-md mx-auto bg-gray-50 min-h-screen relative pb-20">
        <!-- ì´ˆê¸° ë¡œë”© ì¤‘... -->
        <div class="flex items-center justify-center min-h-screen">
            <div class="text-center">
                <div class="text-4xl mb-4">ğŸ“š</div>
                <div class="text-lg font-bold text-gray-800">í•œêµ­ì‚¬ ê²€ì •ì‹œí—˜</div>
                <div class="text-sm text-gray-600">ë¡œë”© ì¤‘...</div>
            </div>
        </div>
    </div>

    <script>
        console.log('ì•± ì‹œì‘');
        
        // ì•± ìƒíƒœ ê´€ë¦¬
        let currentScreen = 'home';
        let currentExam = null;
        let examResults = [];
        let remainingTime = null;
        let timer = null;
        
        // ì‚¬ìš©ì í†µê³„
        let userStats = {
            totalScore: 320,
            correctAnswers: 45,
            totalAnswers: 60,
            streak: 3,
            studyDays: 12,
            level: 4
        };

        // ì‹œí—˜ ê¸°ë¡
        let examHistory = [
            {
                id: 1,
                era: 'ì„ ì‚¬ì‹œëŒ€',
                score: 90,
                date: new Date(Date.now() - 86400000),
                passed: true
            },
            {
                id: 2,
                era: 'ê³ ì¡°ì„ ',
                score: 75,
                date: new Date(Date.now() - 172800000),
                passed: false
            }
        ];

        // ì‹œëŒ€ë³„ ë¬¸ì œ ë°ì´í„°
        const examQuestions = {
            'ì„ ì‚¬ì‹œëŒ€': [
                {
                    id: 1,
                    question: 'êµ¬ì„ê¸° ì‹œëŒ€ì˜ íŠ¹ì§•ìœ¼ë¡œ ê°€ì¥ ì ì ˆí•œ ê²ƒì€?',
                    options: [
                        'ë†ì—…ê³¼ ëª©ì¶•ì„ ì‹œì‘í•˜ì˜€ë‹¤',
                        'ì‚¬ëƒ¥ê³¼ ì±„ì§‘ìœ¼ë¡œ ì‹ëŸ‰ì„ í™•ë³´í•˜ì˜€ë‹¤',
                        'ì²­ë™ê¸°ë¥¼ ì‚¬ìš©í•˜ì˜€ë‹¤',
                        'ì •ì°© ìƒí™œì„ í•˜ì˜€ë‹¤'
                    ],
                    answer: 'ì‚¬ëƒ¥ê³¼ ì±„ì§‘ìœ¼ë¡œ ì‹ëŸ‰ì„ í™•ë³´í•˜ì˜€ë‹¤',
                    explanation: 'êµ¬ì„ê¸° ì‹œëŒ€ëŠ” ì‚¬ëƒ¥ê³¼ ì±„ì§‘ì„ í†µí•´ ì‹ëŸ‰ì„ í™•ë³´í•˜ëŠ” ì´ë™ ìƒí™œì„ í–ˆìŠµë‹ˆë‹¤.'
                },
                {
                    id: 2,
                    question: 'ì‹ ì„ê¸° ì‹œëŒ€ì˜ ëŒ€í‘œì ì¸ í† ê¸°ëŠ”?',
                    options: ['ë¯¼ë¬´ëŠ¬ í† ê¸°', 'ë¹—ì‚´ë¬´ëŠ¬ í† ê¸°', 'íšŒì²­ìƒ‰ í† ê¸°', 'ë°±ì'],
                    answer: 'ë¹—ì‚´ë¬´ëŠ¬ í† ê¸°',
                    explanation: 'ì‹ ì„ê¸° ì‹œëŒ€ì˜ ëŒ€í‘œì ì¸ í† ê¸°ëŠ” ë¹—ì‚´ë¬´ëŠ¬ í† ê¸°ì…ë‹ˆë‹¤.'
                },
                {
                    id: 3,
                    question: 'ì²­ë™ê¸° ì‹œëŒ€ì˜ ëŒ€í‘œì ì¸ ë¬´ë¤ì€?',
                    options: ['ì›€ë¬´ë¤', 'ê³ ì¸ëŒ', 'íš¡í˜ˆì‹ ì„ì‹¤ë¶„', 'ì•íŠ¸ê¸°ì‹ ëŒë§ë„ë¬´ë¤'],
                    answer: 'ê³ ì¸ëŒ',
                    explanation: 'ì²­ë™ê¸° ì‹œëŒ€ì˜ ëŒ€í‘œì ì¸ ë¬´ë¤ì€ ê³ ì¸ëŒì…ë‹ˆë‹¤.'
                }
            ],
            'ê³ ì¡°ì„ ': [
                {
                    id: 11,
                    question: 'ê³ ì¡°ì„ ì˜ ê±´êµ­ ì‹ í™”ì— ë“±ì¥í•˜ëŠ” ì¸ë¬¼ì€?',
                    options: ['ë™ëª…ì™•', 'ë‹¨êµ°', 'ì˜¨ì¡°ì™•', 'ë°•í˜ê±°ì„¸'],
                    answer: 'ë‹¨êµ°',
                    explanation: 'ê³ ì¡°ì„ ì€ ë‹¨êµ°ì™•ê²€ì´ ê±´êµ­í–ˆë‹¤ê³  ì „í•´ì§‘ë‹ˆë‹¤.'
                },
                {
                    id: 12,
                    question: 'ê³ ì¡°ì„ ì˜ 8ì¡°ë²• ì¤‘ í˜„ì¬ ì „í•´ì§€ëŠ” ê²ƒì€ ëª‡ ì¡°ì¸ê°€?',
                    options: ['1ì¡°', '3ì¡°', '5ì¡°', '8ì¡°'],
                    answer: '3ì¡°',
                    explanation: 'ê³ ì¡°ì„ ì˜ 8ì¡°ë²• ì¤‘ í˜„ì¬ëŠ” 3ì¡°ë§Œ ì „í•´ì§‘ë‹ˆë‹¤.'
                },
                {
                    id: 13,
                    question: 'ìœ„ë§Œì¡°ì„ ì„ ë©¸ë§ì‹œí‚¨ ë‚˜ë¼ëŠ”?',
                    options: ['ê³ êµ¬ë ¤', 'ë°±ì œ', 'í•œë‚˜ë¼', 'ì‹ ë¼'],
                    answer: 'í•œë‚˜ë¼',
                    explanation: 'í•œë‚˜ë¼ ë¬´ì œê°€ ìœ„ë§Œì¡°ì„ ì„ ë©¸ë§ì‹œì¼°ìŠµë‹ˆë‹¤.'
                }
            ],
            'ì‚¼êµ­ì‹œëŒ€': [
                {
                    id: 21,
                    question: 'ê³ êµ¬ë ¤ì˜ ì „ì„±ê¸°ë¥¼ ì´ëˆ ì™•ì€?',
                    options: ['ë™ëª…ì™•', 'ê´‘ê°œí† ëŒ€ì™•', 'ì¥ìˆ˜ì™•', 'ì—°ê°œì†Œë¬¸'],
                    answer: 'ê´‘ê°œí† ëŒ€ì™•',
                    explanation: 'ê´‘ê°œí† ëŒ€ì™•ì€ ê³ êµ¬ë ¤ì˜ ì „ì„±ê¸°ë¥¼ ì´ëˆ ì™•ì…ë‹ˆë‹¤.'
                },
                {
                    id: 22,
                    question: 'ë°±ì œê°€ ì¼ë³¸ì— ì „í•´ì¤€ ë¬¸í™”ëŠ”?',
                    options: ['ë¶ˆêµì™€ í•œí•™', 'ë„êµ', 'ì²­ë™ê¸° ê¸°ìˆ ', 'ì² ê¸° ê¸°ìˆ '],
                    answer: 'ë¶ˆêµì™€ í•œí•™',
                    explanation: 'ë°±ì œëŠ” ì¼ë³¸ì— ë¶ˆêµì™€ í•œí•™ì„ ì „í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.'
                },
                {
                    id: 23,
                    question: 'ì‹ ë¼ì˜ ì‹ ë¶„ì œë„ëŠ”?',
                    options: ['8ì¡°ë²•', 'ê³¨í’ˆì œ', 'ë¬¸ë²Œ ê·€ì¡±ì œ', 'ì–‘ë°˜ì œ'],
                    answer: 'ê³¨í’ˆì œ',
                    explanation: 'ì‹ ë¼ëŠ” ê³¨í’ˆì œë¼ëŠ” ì—„ê²©í•œ ì‹ ë¶„ì œë¥¼ ì‹œí–‰í–ˆìŠµë‹ˆë‹¤.'
                }
            ],
            'í†µì¼ì‹ ë¼': [
                {
                    id: 31,
                    question: 'í†µì¼ì‹ ë¼ì˜ ì§€ë°© í–‰ì •êµ¬ì—­ì€?',
                    options: ['5ë„ ì–‘ê³„', '9ì£¼ 5ì†Œê²½', '8ë„', '23ë¶€'],
                    answer: '9ì£¼ 5ì†Œê²½',
                    explanation: 'í†µì¼ì‹ ë¼ëŠ” 9ì£¼ 5ì†Œê²½ì˜ ì§€ë°© í–‰ì •êµ¬ì—­ì„ ë‘ì—ˆìŠµë‹ˆë‹¤.'
                },
                {
                    id: 32,
                    question: 'í†µì¼ì‹ ë¼ì˜ ëŒ€í‘œì ì¸ ë¬¸í™”ìœ ì‚°ì€?',
                    options: ['ì²¨ì„±ëŒ€', 'ë¶ˆêµ­ì‚¬ì™€ ì„êµ´ì•”', 'ë‹¤ë³´íƒ‘', 'ë¶„í™©ì‚¬'],
                    answer: 'ë¶ˆêµ­ì‚¬ì™€ ì„êµ´ì•”',
                    explanation: 'ë¶ˆêµ­ì‚¬ì™€ ì„êµ´ì•”ì€ í†µì¼ì‹ ë¼ì˜ ëŒ€í‘œì ì¸ ë¬¸í™”ìœ ì‚°ì…ë‹ˆë‹¤.'
                },
                {
                    id: 33,
                    question: 'í†µì¼ì‹ ë¼ ë§ê¸°ì— ë“±ì¥í•œ ì„¸ë ¥ì€?',
                    options: ['ë¬¸ë²Œ ê·€ì¡±', '6ë‘í’ˆ', 'í˜¸ì¡±', 'ì§„ê³¨'],
                    answer: 'í˜¸ì¡±',
                    explanation: 'í†µì¼ì‹ ë¼ ë§ê¸°ì—ëŠ” ì§€ë°© í˜¸ì¡± ì„¸ë ¥ì´ ì„±ì¥í–ˆìŠµë‹ˆë‹¤.'
                }
            ],
            'ê³ ë ¤': [
                {
                    id: 41,
                    question: 'ê³ ë ¤ì˜ êµ­êµëŠ”?',
                    options: ['ìœ êµ', 'ë¶ˆêµ', 'ë„êµ', 'ê¸°ë…êµ'],
                    answer: 'ë¶ˆêµ',
                    explanation: 'ê³ ë ¤ëŠ” ë¶ˆêµë¥¼ êµ­êµë¡œ ì‚¼ì•˜ìŠµë‹ˆë‹¤.'
                },
                {
                    id: 42,
                    question: 'ê³ ë ¤ì˜ ëŒ€í‘œì ì¸ ë„ìê¸°ëŠ”?',
                    options: ['ë°±ì', 'ì²­ì', 'ë¶„ì²­ì‚¬ê¸°', 'ì˜¹ê¸°'],
                    answer: 'ì²­ì',
                    explanation: 'ê³ ë ¤ì²­ìëŠ” ì„¸ê³„ì ìœ¼ë¡œ ìœ ëª…í•œ ê³ ë ¤ì˜ ëŒ€í‘œ ë„ìê¸°ì…ë‹ˆë‹¤.'
                },
                {
                    id: 43,
                    question: 'ë¬´ì‹ ì •ë³€ì´ ì¼ì–´ë‚œ ì—°ë„ëŠ”?',
                    options: ['1170ë…„', '1180ë…„', '1190ë…„', '1200ë…„'],
                    answer: '1170ë…„',
                    explanation: 'ë¬´ì‹ ì •ë³€ì€ 1170ë…„ì— ì¼ì–´ë‚¬ìŠµë‹ˆë‹¤.'
                }
            ],
            'ì¡°ì„ ì „ê¸°': [
                {
                    id: 51,
                    question: 'ì¡°ì„ ì˜ í†µì¹˜ ì´ë…ì€?',
                    options: ['ë¶ˆêµ', 'ì„±ë¦¬í•™', 'ì‹¤í•™', 'ì–‘ëª…í•™'],
                    answer: 'ì„±ë¦¬í•™',
                    explanation: 'ì¡°ì„ ì€ ì„±ë¦¬í•™ì„ í†µì¹˜ ì´ë…ìœ¼ë¡œ ì‚¼ì•˜ìŠµë‹ˆë‹¤.'
                },
                {
                    id: 52,
                    question: 'í•œê¸€ì„ ì°½ì œí•œ ì™•ì€?',
                    options: ['íƒœì¡°', 'íƒœì¢…', 'ì„¸ì¢…', 'ì„¸ì¡°'],
                    answer: 'ì„¸ì¢…',
                    explanation: 'ì„¸ì¢…ëŒ€ì™•ì´ í•œê¸€(í›ˆë¯¼ì •ìŒ)ì„ ì°½ì œí–ˆìŠµë‹ˆë‹¤.'
                },
                {
                    id: 53,
                    question: 'ì¡°ì„ ì˜ ì‹ ë¶„ì œëŠ”?',
                    options: ['ê³¨í’ˆì œ', 'ì–‘ë°˜, ì¤‘ì¸, ìƒë¯¼, ì²œë¯¼', 'ë¬¸ë²Œ ê·€ì¡±ì œ', 'ê´€í’ˆì œ'],
                    answer: 'ì–‘ë°˜, ì¤‘ì¸, ìƒë¯¼, ì²œë¯¼',
                    explanation: 'ì¡°ì„ ì€ ì–‘ë°˜, ì¤‘ì¸, ìƒë¯¼, ì²œë¯¼ì˜ 4ê³„ì¸µ ì‹ ë¶„ì œë¥¼ ë‘ì—ˆìŠµë‹ˆë‹¤.'
                }
            ],
            'ì¡°ì„ í›„ê¸°': [
                {
                    id: 61,
                    question: 'ì¡°ì„ í›„ê¸°ì— ë“±ì¥í•œ í•™ë¬¸ì€?',
                    options: ['ì„±ë¦¬í•™', 'ì‹¤í•™', 'ì–‘ëª…í•™', 'í›ˆê³ í•™'],
                    answer: 'ì‹¤í•™',
                    explanation: 'ì¡°ì„ í›„ê¸°ì—ëŠ” í˜„ì‹¤ ê°œí˜ì„ ì¶”êµ¬í•˜ëŠ” ì‹¤í•™ì´ ë“±ì¥í–ˆìŠµë‹ˆë‹¤.'
                },
                {
                    id: 62,
                    question: 'ì˜ì¡°ê°€ ì‹¤ì‹œí•œ ì •ì¹˜ëŠ”?',
                    options: ['ë¶•ë‹¹ì •ì¹˜', 'íƒ•í‰ì •ì¹˜', 'ì„¸ë„ì •ì¹˜', 'ì¹œì •ì²´ì œ'],
                    answer: 'íƒ•í‰ì •ì¹˜',
                    explanation: 'ì˜ì¡°ëŠ” ë¶•ë‹¹ ê°„ì˜ ëŒ€ë¦½ì„ ì™„í™”í•˜ëŠ” íƒ•í‰ì •ì¹˜ë¥¼ ì‹¤ì‹œí–ˆìŠµë‹ˆë‹¤.'
                },
                {
                    id: 63,
                    question: 'ì¡°ì„ í›„ê¸° ëŒ€í‘œì ì¸ ë¬¸í•™ì€?',
                    options: ['í•œë¬¸ì†Œì„¤', 'í•œê¸€ì†Œì„¤', 'ê°€ì‚¬', 'ì‹œì¡°'],
                    answer: 'í•œê¸€ì†Œì„¤',
                    explanation: 'ì¡°ì„ í›„ê¸°ì—ëŠ” í™ê¸¸ë™ì „, ì¶˜í–¥ì „ ë“± í•œê¸€ì†Œì„¤ì´ ë°œë‹¬í–ˆìŠµë‹ˆë‹¤.'
                }
            ]
        };

        const eras = ['ì„ ì‚¬ì‹œëŒ€', 'ê³ ì¡°ì„ ', 'ì‚¼êµ­ì‹œëŒ€', 'í†µì¼ì‹ ë¼', 'ê³ ë ¤', 'ì¡°ì„ ì „ê¸°', 'ì¡°ì„ í›„ê¸°'];

        // ì‹œí—˜ ì‹œì‘
        function startExam(era) {
            console.log('ì‹œí—˜ ì‹œì‘:', era);
            const questions = examQuestions[era] || [];
            if (questions.length === 0) return;
            
            currentExam = {
                era,
                questions: [...questions],
                currentQuestion: 0,
                answers: {},
                startTime: new Date()
            };
            remainingTime = questions.length * 90;
            currentScreen = 'exam';
            render();
            startTimer();
        }

        // íƒ€ì´ë¨¸ ì‹œì‘
        function startTimer() {
            if (timer) clearInterval(timer);
            timer = setInterval(() => {
                if (remainingTime > 0) {
                    remainingTime--;
                    updateTimer();
                } else {
                    finishExam();
                }
            }, 1000);
        }

        // íƒ€ì´ë¨¸ ì—…ë°ì´íŠ¸
        function updateTimer() {
            const timerElement = document.getElementById('timer');
            if (timerElement) {
                const minutes = Math.floor(remainingTime / 60);
                const seconds = remainingTime % 60;
                timerElement.textContent = minutes + ':' + (seconds < 10 ? '0' : '') + seconds;
            }
        }

        // ë‹µì•ˆ ì„ íƒ
        function selectAnswer(questionId, answer) {
            if (!currentExam) return;
            currentExam.answers[questionId] = answer;
            render();
        }

        // ë‹¤ìŒ ë¬¸ì œ
        function nextQuestion() {
            if (!currentExam) return;
            
            if (currentExam.currentQuestion < currentExam.questions.length - 1) {
                currentExam.currentQuestion++;
                render();
            } else {
                finishExam();
            }
        }

        // ì´ì „ ë¬¸ì œ
        function prevQuestion() {
            if (!currentExam || currentExam.currentQuestion === 0) return;
            currentExam.currentQuestion--;
            render();
        }

        // ì‹œí—˜ ì™„ë£Œ
        function finishExam() {
            if (!currentExam) return;
            if (timer) clearInterval(timer);

            const results = currentExam.questions.map(q => {
                const userAnswer = currentExam.answers[q.id];
                const isCorrect = userAnswer === q.answer;
                return { ...q, userAnswer, isCorrect };
            });

            const correctCount = results.filter(r => r.isCorrect).length;
            const score = Math.round((correctCount / results.length) * 100);
            const passed = score >= 80;

            // í†µê³„ ì—…ë°ì´íŠ¸
            userStats.totalScore += score;
            userStats.correctAnswers += correctCount;
            userStats.totalAnswers += results.length;
            userStats.streak = passed ? userStats.streak + 1 : 0;
            userStats.level = Math.floor(userStats.totalScore / 100) + 1;

            // ì‹œí—˜ ê¸°ë¡ ì¶”ê°€
            const newExamResult = {
                id: Date.now(),
                era: currentExam.era,
                score,
                date: new Date(),
                passed
            };
            examHistory.unshift(newExamResult);

            examResults = results;
            currentScreen = 'examResult';
            render();

            // ìŒì„± í”¼ë“œë°±
            setTimeout(() => {
                playVoiceFeedback(passed ? 'í˜„ì •ì´ ì•„ì£¼ì˜í–ˆì–´' : 'í˜„ì •ì´ ë” ì—´ì‹¬íˆ í•´ë´ìš”');
            }, 1000);
        }

        // ìŒì„± í”¼ë“œë°±
        function playVoiceFeedback(text) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'ko-KR';
                utterance.pitch = 2.0;
                utterance.rate = 0.8;
                window.speechSynthesis.speak(utterance);
            }
        }

        // í™”ë©´ ì „í™˜
        function setCurrentScreen(screen) {
            currentScreen = screen;
            render();
        }

        // ì‹œê°„ í¬ë§·íŒ…
        function formatTimeAgo(date) {
            const now = new Date();
            const diffInHours = Math.floor((now - date) / (1000 * 60 * 60));
            if (diffInHours < 1) return 'ë°©ê¸ˆ ì „';
            if (diffInHours < 24) return diffInHours + 'ì‹œê°„ ì „';
            return Math.floor(diffInHours / 24) + 'ì¼ ì „';
        }

        // í™ˆ í™”ë©´
        function renderHomeScreen() {
            const icons = ['ğŸ¦•', 'ğŸ›ï¸', 'âš”ï¸', 'ğŸ‘‘', 'ğŸ¯', 'ğŸ¨', 'ğŸ“œ'];
            const accuracy = userStats.totalAnswers > 0 
                ? Math.round((userStats.correctAnswers / userStats.totalAnswers) * 100)
                : 0;

            return `
                <div class="bg-custom min-h-screen">
                    <div class="px-6 pt-12">
                        <div class="text-center mb-8">
                            <div class="flex justify-between items-center mb-6">
                                <h1 class="text-2xl font-bold text-white">í•œêµ­ì‚¬ ê²€ì •ì‹œí—˜</h1>
                                <div class="text-white/80 text-sm">by ë¨¸ìŠ´ì´</div>
                            </div>
                            
                            <div class="mb-8">
                                <h2 class="text-xl mb-2 text-white">ì•ˆë…•í•˜ì„¸ìš”, í˜„ì •ë‹˜! ğŸ±</h2>
                                <p class="text-white/90">ì˜¤ëŠ˜ë„ ì—´ì‹¬íˆ ê³µë¶€í•´ë´ìš” ğŸ’ª</p>
                            </div>

                            <div class="grid grid-cols-3 gap-4 mb-8">
                                <div class="bg-white/20 rounded-2xl p-4 text-center">
                                    <div class="text-2xl font-bold text-white">${userStats.streak}</div>
                                    <div class="text-sm text-white/80">ì—°ì† í•©ê²©</div>
                                </div>
                                <div class="bg-white/20 rounded-2xl p-4 text-center">
                                    <div class="text-2xl font-bold text-white">${userStats.totalScore}</div>
                                    <div class="text-sm text-white/80">ì´ ì ìˆ˜</div>
                                </div>
                                <div class="bg-white/20 rounded-2xl p-4 text-center">
                                    <div class="text-2xl font-bold text-white">${accuracy}%</div>
                                    <div class="text-sm text-white/80">ì •ë‹µë¥ </div>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white/90 rounded-3xl p-6 mb-6">
                            <h3 class="text-lg font-bold text-gray-900 mb-4 text-center">ì‹œëŒ€ë³„ ì‹œí—˜ ì„ íƒ</h3>
                            <div class="grid grid-cols-2 gap-3">
                                ${eras.map((era, index) => {
                                    const questionCount = examQuestions[era]?.length || 0;
                                    return `
                                        <button
                                            onclick="startExam('${era}')"
                                            class="bg-white border-2 border-gray-100 rounded-2xl p-4 text-center hover:border-blue-400 hover:bg-blue-50 transition-all"
                                        >
                                            <div class="text-2xl mb-2">${icons[index]}</div>
                                            <h4 class="font-bold text-gray-900 mb-1">${era}</h4>
                                            <p class="text-sm text-gray-500">${questionCount}ë¬¸ì œ</p>
                                        </button>
                                    `;
                                }).join('')}
                            </div>
                        </div>

                        <div class="bg-white/90 rounded-3xl p-6">
                            <h3 class="text-lg font-bold text-gray-900 mb-4">ìµœê·¼ ì‹œí—˜ ê²°ê³¼</h3>
                            <div class="space-y-3">
                                ${examHistory.slice(0, 2).map(exam => `
                                    <div class="flex items-center justify-between bg-white rounded-xl p-3">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-5 h-5 rounded-full ${exam.passed ? 'bg-green-500' : 'bg-red-500'}"></div>
                                            <div>
                                                <div class="font-medium">${exam.era} ì‹œí—˜</div>
                                                <div class="text-sm text-gray-500">${exam.score}ì  â€¢ ${formatTimeAgo(exam.date)}</div>
                                            </div>
                                        </div>
                                        <span class="px-3 py-1 rounded-full text-sm ${
                                            exam.passed ? 'bg-green-100 text-green-600' : 'bg-red-100 text-red-600'
                                        }">
                                            ${exam.passed ? 'í•©ê²©' : 'ë¶ˆí•©ê²©'}
                                        </span>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // ì‹œí—˜ í™”ë©´
        function renderExamScreen() {
            if (!currentExam) return '';

            const currentQ = currentExam.questions[currentExam.currentQuestion];
            const progress = ((currentExam.currentQuestion + 1) / currentExam.questions.length) * 100;
            const selectedAnswer = currentExam.answers[currentQ.id];

            return `
                <div class="bg-white min-h-screen">
                    <div class="bg-blue-600 px-6 pt-12 pb-6 text-white">
                        <div class="flex items-center justify-between mb-4">
                            <button onclick="setCurrentScreen('home')">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                                </svg>
                            </button>
                            <div class="text-center">
                                <h1 class="text-lg font-bold">${currentExam.era} ì‹œí—˜</h1>
                                <p class="text-sm">${currentExam.currentQuestion + 1} / ${currentExam.questions.length}</p>
                            </div>
                            <div class="text-sm" id="timer">0:00</div>
                        </div>
                        
                        <div class="bg-white/20 rounded-full h-2">
                            <div class="bg-white h-2 rounded-full" style="width: ${progress}%"></div>
                        </div>
                    </div>

                    <div class="px-6 py-6">
                        <div class="bg-gray-50 rounded-2xl p-6 mb-6">
                            <div class="flex items-center justify-between mb-4">
                                <span class="bg-blue-100 text-blue-600 px-3 py-1 rounded-full text-sm">
                                    ë¬¸ì œ ${currentExam.currentQuestion + 1}
                                </span>
                            </div>
                            <h3 class="text-lg font-bold text-gray-900">${currentQ.question}</h3>
                        </div>

                        <div class="space-y-3 mb-8">
                            ${currentQ.options.map((option, index) => `
                                <button
                                    onclick="selectAnswer(${currentQ.id}, '${option}')"
                                    class="w-full p-4 rounded-2xl text-left transition-all ${
                                        selectedAnswer === option
                                            ? 'bg-blue-50 border-2 border-blue-400'
                                            : 'bg-white border-2 border-gray-100'
                                    }"
                                >
                                    <div class="flex items-center">
                                        <span class="w-8 h-8 rounded-full border-2 mr-4 flex items-center justify-center font-bold ${
                                            selectedAnswer === option
                                                ? 'border-blue-400 bg-blue-400 text-white'
                                                : 'border-gray-300'
                                        }">
                                            ${index + 1}
                                        </span>
                                        <span>${option}</span>
                                    </div>
                                </button>
                            `).join('')}
                        </div>

                        <div class="flex space-x-4">
                            <button
                                onclick="prevQuestion()"
                                ${currentExam.currentQuestion === 0 ? 'disabled' : ''}
                                class="flex-1 py-4 rounded-2xl font-bold ${
                                    currentExam.currentQuestion === 0
                                        ? 'bg-gray-100 text-gray-300'
                                        : 'bg-purple-600 text-white'
                                }"
                            >
                                ì´ì „ ë¬¸ì œ
                            </button>
                            <button
                                onclick="${currentExam.currentQuestion === currentExam.questions.length - 1 ? 'finishExam()' : 'nextQuestion()'}"
                                ${!selectedAnswer ? 'disabled' : ''}
                                class="flex-1 py-4 rounded-2xl font-bold ${
                                    !selectedAnswer
                                        ? 'bg-gray-300 text-gray-500'
                                        : 'bg-blue-600 text-white'
                                }"
                            >
                                ${currentExam.currentQuestion === currentExam.questions.length - 1 ? 'ì‹œí—˜ ì™„ë£Œ' : 'ë‹¤ìŒ ë¬¸ì œ'}
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        // ì‹œí—˜ ê²°ê³¼ í™”ë©´
        function renderExamResultScreen() {
            const correctCount = examResults.filter(r => r.isCorrect).length;
            const score = Math.round((correctCount / examResults.length) * 100);
            const passed = score >= 80;

            return `
                <div class="bg-white min-h-screen">
                    <div class="px-6 pt-12 pb-8 text-white ${passed ? 'bg-green-500' : 'bg-red-500'}">
                        <div class="text-center">
                            <div class="text-6xl mb-4">${passed ? 'ğŸ‰' : 'ğŸ˜¢'}</div>
                            <h1 class="text-2xl font-bold mb-2">${passed ? 'í•©ê²©ì…ë‹ˆë‹¤!' : 'ë¶ˆí•©ê²©ì…ë‹ˆë‹¤'}</h1>
                            <p class="text-lg">${score}ì </p>
                            <p class="text-sm opacity-90">${correctCount}ë¬¸ì œ ì •ë‹µ / ì´ ${examResults.length}ë¬¸ì œ</p>
                        </div>
                    </div>

                    <div class="px-6 py-6">
                        <div class="space-y-3 mb-8">
                            <h3 class="font-bold text-gray-900">ë¬¸ì œë³„ ê²°ê³¼</h3>
                            ${examResults.map((result, index) => `
                                <div class="bg-white border rounded-2xl p-4">
                                    <div class="flex items-start space-x-3">
                                        <div class="w-8 h-8 rounded-full flex items-center justify-center text-white font-bold ${
                                            result.isCorrect ? 'bg-green-500' : 'bg-red-500'
                                        }">
                                            ${index + 1}
                                        </div>
                                        <div class="flex-1">
                                            <div class="font-medium mb-2">${result.question}</div>
                                            <div class="text-sm space-y-1">
                                                <div class="text-green-600">âœ“ ì •ë‹µ: ${result.answer}</div>
                                                ${!result.isCorrect ? `<div class="text-red-600">âœ— ì„ íƒ: ${result.userAnswer || 'ë¯¸ì„ íƒ'}</div>` : ''}
                                                <div class="text-gray-500 text-xs mt-2">${result.explanation}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>

                        <button
                            onclick="setCurrentScreen('home')"
                            class="w-full bg-blue-600 text-white py-4 rounded-2xl font-bold"
                        >
                            í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°
                        </button>
                    </div>
                </div>
            `;
        }

        // ë©”ì¸ ë Œë”ë§ í•¨ìˆ˜
        function render() {
            console.log('ë Œë”ë§:', currentScreen);
            let content = '';
            
            switch (currentScreen) {
                case 'home':
                    content = renderHomeScreen();
                    break;
                case 'exam':
                    content = renderExamScreen();
                    break;
                case 'examResult':
                    content = renderExamResultScreen();
                    break;
                default:
                    content = renderHomeScreen();
            }

            document.getElementById('app').innerHTML = content;
            
            if (currentScreen === 'exam' && remainingTime !== null) {
                updateTimer();
            }
        }

        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM ë¡œë“œ ì™„ë£Œ');
            setTimeout(() => {
                render();
            }, 500);
        });
    </script>
</body>
</html>